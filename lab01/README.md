# Лабораторная работа: TCP клиент-сервер для передачи файлов

Реализация TCP клиента и сервера с поддержкой команд, передачи файлов и докачки.

## Функциональность

### Команды сервера:
- `ECHO <текст>` - возвращает переданный текст
- `TIME` - возвращает текущее время сервера
- `UPLOAD <файл>` - загрузить файл на сервер
- `DOWNLOAD <файл>` - скачать файл с сервера
- `CLOSE` - закрыть соединение

### Особенности:
- Поддержка докачки файлов при обрыве соединения
- Keep-Alive для обнаружения разрывов соединения
- Отображение скорости передачи (битрейт)
- Многопоточная обработка клиентов

## Требования

- Python 3.6 или выше
- Утилиты: `nmap`, `netstat` (для демонстрации)

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone https://github.com/dimin7226/sspo-labs.git
cd sspo-labs/lab01
```

### 2. Создание необходимых папок

Программа сама создаст нужные папки при первом запуске, но вы можете создать их вручную:

```bash
# В папке lab01 создайте:
mkdir uploads
mkdir partial
```

### 3. Подготовка файла для передачи

Создайте тестовый файл для загрузки:

**Linux/Mac:**
```bash
# Создать файл 10MB
dd if=/dev/urandom of=testfile.bin bs=1M count=10

# Или текстовый файл
echo "Hello, Server!" > file1.txt
```

**Windows (PowerShell):**
```powershell
# Создать файл 10MB
$out = new-object byte[] 10485760; [io.file]::WriteAllBytes('testfile.bin', $out)

# Или текстовый файл
"Hello, Server!" > file1.txt
```

### 4. Запуск сервера

```bash
python server.py
```
Сервер запустится на порту 12345 (по умолчанию).

### 5. Запуск клиента

В другом терминале:

```bash
python client.py
```

При запуске клиент запросит:
- IP сервера (Enter для localhost)
- ID клиента (Enter для "1")

### 6. Работа с программой

После подключения доступны команды:

```
> CONNECT           # подключиться к серверу
> TIME              # показать время сервера
> ECHO Привет!      # проверить эхо
> UPLOAD file1.txt  # загрузить файл
> DOWNLOAD file1.txt # скачать файл
> CLOSE             # закрыть соединение
> Q                 # выход из программы
```